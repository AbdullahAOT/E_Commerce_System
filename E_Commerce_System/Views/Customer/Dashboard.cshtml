@using Microsoft.AspNetCore.Http

@{
    ViewData["Title"] = "Customer Dashboard";
    var customerId = Context.Session.GetInt32("CustomerId");
}

<style>
    /* Make "My Orders" outline button show white text and info background on hover/focus like other buttons */
    .my-orders-btn:hover,
    .my-orders-btn:focus {
        color: #fff !important;
        background-color: var(--bs-info) !important;
        border-color: var(--bs-info) !important;
        text-decoration: none;
    }
</style>

<div class="row">
    <div class="col-md-3 text-center">
        @if (customerId.HasValue)
        {
            <img src="/api/Customers/@customerId.Value/photo"
                 alt="Profile photo"
                 class="rounded-circle img-thumbnail"
                 style="width:140px;height:140px;object-fit:cover;"
                 onerror="this.style.display='none';" />
        }
    </div>

    <div class="col-md-9">
        <h2>Welcome, @ViewBag.CustomerName</h2>

        <div class="mt-3">
            <h5>Your Orders Summary</h5>
            <ul class="list-unstyled">
                <li>Total Orders: <strong>@ViewBag.TotalOrders</strong></li>
                <li>Total Amount of Orders: <strong>@(ViewBag.TotalAmount) JOD</strong></li>
            </ul>
        </div>

        <div class="mt-3">
            <a class="btn btn-outline-secondary me-2" asp-action="EditProfile">Edit Profile</a>
            <a class="btn btn-outline-primary me-2" asp-action="Products">Browse Products</a>
            <a class="btn btn-outline-info me-2 my-orders-btn" asp-action="MyOrders">My Orders</a>
            <a class="btn btn-danger" asp-action="Logout">Logout</a>
        </div>
    </div>
</div>